import{_ as w,u as E,aY as B,a6 as b,E as d,r as A,o as m,a8 as S,w as e,b as a,V as y,aA as L,ac as p,ae as V,aB as R,aC as T,aX as M,R as N,ay as U,I as D,a7 as F,a as x,aa as f,ad as Y,F as C,e as $,aD as z,O as G,af as H,ag as O}from"./index-DeG0fqyX.js";import{V as X,a as _}from"./VCol-BdXlyCkl.js";import{V as P}from"./VRow-u1lpl75C.js";import{V as j}from"./VPagination-hhI_IJ_o.js";const q={__name:"ProductCard",props:["_id","category","description","image","name","price","sell"],setup(s){const r=E(),i=B(),g=b(),v=s,o=d(!1),u=async()=>{if(!r.isLogin){i.push("/login");return}o.value=!0;const l=await r.addCart(v._id,1);g({text:l.text,snackbarProps:{color:l.color}}),o.value=!1};return(l,h)=>{const c=A("router-link");return m(),S(U,{class:"card"},{default:e(()=>[a(y,{class:"",src:s.image,cover:"",height:"200"},null,8,["src"]),a(L,{class:"text-center"},{default:e(()=>[a(c,{class:"card-title",to:"/products/"+s._id},{default:e(()=>[p(V(s.name),1)]),_:1},8,["to"])]),_:1}),a(R,null,{default:e(()=>[p("$"+V(s.price),1)]),_:1}),a(T,null,{default:e(()=>[p(V(s.description),1)]),_:1}),a(M,{class:"btn"},{default:e(()=>[a(N,{"prepend-icon":"mdi-cart",onClick:u,loading:o.value},{default:e(()=>[p("加入購物車")]),_:1},8,["loading"])]),_:1})]),_:1})}}},J=w(q,[["__scopeId","data-v-54fdad5c"]]),I=s=>(H("data-v-09c3a76e"),s=s(),O(),s),K=I(()=>f("h1",{class:"text-center title1 text-black text-Chinese"},"線上購物",-1)),Q={class:"image-container"},W=I(()=>f("h1",{class:"text-overlay"},"寵物紀鑰匙圈",-1)),k=20,Z={__name:"ProductPage",setup(s){const r=d(!1),i=()=>{const c=window.scrollY,n=80;r.value=c>n};D(()=>{window.addEventListener("scroll",i)}),F(()=>{window.removeEventListener("scroll",i)});const{api:g}=z(),v=b(),o=d(1),u=d(1),l=d([]),h=async()=>{var c,n;try{const{data:t}=await g.get("/product",{params:{itemsPerPage:k,page:o.value}});u.value=Math.ceil(t.result.total/k),l.value.splice(0,l.value.length,...t.result.data)}catch(t){console.log(t),v({text:((n=(c=t==null?void 0:t.response)==null?void 0:c.data)==null?void 0:n.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return h(),(c,n)=>(m(),x(C,null,[f("div",{id:"navbar",class:Y({"hidden-navbar":r.value})},null,2),a(X,{fluid:"",class:"container"},{default:e(()=>[a(P,null,{default:e(()=>[a(_,{cols:"12"},{default:e(()=>[K]),_:1})]),_:1}),a(P,null,{default:e(()=>[a(_,{cols:"12",md:"5",class:"no-padding image-container"},{default:e(()=>[f("div",Q,[a(y,{class:"text",src:"https://picsum.photos/300/200/?random=10"}),W])]),_:1}),(m(!0),x(C,null,$(l.value,t=>(m(),S(_,{cols:"12",md:"2",lg:"2",class:"pl-5 pr-3",key:t._id},{default:e(()=>[a(J,G({ref_for:!0},t),null,16)]),_:2},1024))),128)),a(_,{cols:"12",class:"text-grey"},{default:e(()=>[a(j,{modelValue:o.value,"onUpdate:modelValue":[n[0]||(n[0]=t=>o.value=t),h],length:u.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})],64))}},oa=w(Z,[["__scopeId","data-v-09c3a76e"]]);export{oa as default};
