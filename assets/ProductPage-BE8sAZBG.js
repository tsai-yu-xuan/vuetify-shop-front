import{_ as C,u as E,aM as B,a6 as k,E as i,r as L,o as u,a as m,b as t,w as a,au as M,O as y,V as N,D as R,ad as r,ac as h,a9 as T,ay as $,ab as V,aD as A,R as D,af as S,ag as I,I as U,a7 as z,ae as F,F as b,e as H,a8 as G,az as O}from"./index-4zsskV5y.js";import{V as Y}from"./VHover-DDr7iv6s.js";import{V as P}from"./VRow-D4Rf27w1.js";import{V as x}from"./VCol-3_EGEFi8.js";import{V as j}from"./VPagination-Bn3iRabL.js";import{V as q}from"./VContainer-C3aZb63k.js";const J=e=>(S("data-v-f3c58b94"),e=e(),I(),e),K={key:0,class:"d-flex flex-column transition-fast-in-fast-out bg-orange-darken-2 v-card--reveal text-h2",style:{height:"100%"}},Q={class:"price-text"},W=J(()=>r("br",null,null,-1)),X={class:"description-text"},Z={class:"text-h4 font-weight-light text-orange mb-2 text-center"},ee={__name:"ProductCard",props:["_id","category","description","image","name","price","sell"],setup(e){const d=E(),p=B(),f=k(),g=e,c=i(!1),_=async()=>{if(!d.isLogin){p.push("/login");return}c.value=!0;const n=await d.addCart(g._id,1);f({text:n.text,snackbarProps:{color:n.color}}),c.value=!1};return(n,v)=>{const l=L("router-link");return u(),m("div",null,[t(Y,null,{default:a(({isHovering:o,props:s})=>[t(M,y({class:"mx-auto card",color:"grey-lighten-5","max-width":"500"},s),{default:a(()=>[t(l,{class:"card-title",to:"/products/"+e._id},{default:a(()=>[t(N,{"aspect-ratio":16/13,src:e.image,cover:""},{default:a(()=>[t(R,null,{default:a(()=>[o?(u(),m("div",K,[r("div",null,[r("p",Q,"$"+h(e.price),1)]),W,r("div",X,h(e.description),1)])):T("",!0)]),_:2},1024)]),_:2},1032,["src"]),t($,{class:"pt-6"},{default:a(()=>[r("h3",Z,[t(l,{class:"card-title",to:"/products/"+e._id},{default:a(()=>[V(h(e.name),1)]),_:1},8,["to"])])]),_:1})]),_:2},1032,["to"]),t(A,{class:"btn"},{default:a(()=>[t(D,{"prepend-icon":"mdi-cart",onClick:_,loading:c.value},{default:a(()=>[V("加入購物車")]),_:1},8,["loading"])]),_:1})]),_:2},1040)]),_:1})])}}},te=C(ee,[["__scopeId","data-v-f3c58b94"]]),ae=e=>(S("data-v-92c74bc9"),e=e(),I(),e),se=ae(()=>r("h1",{class:"text-center title1 text-black text-Chinese"},"線上購物",-1)),w=20,oe={__name:"ProductPage",setup(e){const d=i(!1),p=()=>{const l=window.scrollY,o=80;d.value=l>o};U(()=>{window.addEventListener("scroll",p)}),z(()=>{window.removeEventListener("scroll",p)});const{api:f}=O(),g=k(),c=i(1),_=i(1),n=i([]),v=async()=>{var l,o;try{const{data:s}=await f.get("/product",{params:{itemsPerPage:w,page:c.value}});_.value=Math.ceil(s.result.total/w),n.value.splice(0,n.value.length,...s.result.data)}catch(s){console.log(s),g({text:((o=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:o.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return v(),(l,o)=>(u(),m(b,null,[r("div",{id:"navbar",class:F({"hidden-navbar":d.value})},null,2),t(q,{fluid:"",class:"container"},{default:a(()=>[t(P,null,{default:a(()=>[t(x,{cols:"12"},{default:a(()=>[se]),_:1})]),_:1}),t(P,{class:"product-div"},{default:a(()=>[(u(!0),m(b,null,H(n.value,s=>(u(),G(x,{cols:"12",md:"4",lg:"3",class:"pl-3 pr-3 mb-5",key:s._id},{default:a(()=>[t(te,y({ref_for:!0},s),null,16)]),_:2},1024))),128)),t(x,{cols:"12",class:"text-grey"},{default:a(()=>[t(j,{modelValue:c.value,"onUpdate:modelValue":[o[0]||(o[0]=s=>c.value=s),v],length:_.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})],64))}},ue=C(oe,[["__scopeId","data-v-92c74bc9"]]);export{ue as default};
