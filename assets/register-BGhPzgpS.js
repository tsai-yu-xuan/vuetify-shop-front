import{_ as y,E,I as F,a7 as I,a6 as U,o as A,a as B,aa as m,ae as P,b as s,w as t,aC as q,d as e,aA as i,R as N,ac as R,F as $,az as z,aM as L,af as T,ag as D}from"./index-Dmgm2gaZ.js";import{c as H,a as d,f as O,u as Y,e as u,V as j}from"./vee-validate.esm-Cq4EjU1E.js";import{v as _}from"./index-DcBOdE6S.js";import{V as G}from"./VRow-BMYarr0t.js";import{V as h}from"./VCol-BcJk87lM.js";import{V as J}from"./VDivider--ksFbEwM.js";import{V as K}from"./VContainer-D3yCYqHW.js";import"./_commonjsHelpers-Cpj98o6Y.js";const Q=l=>(T("data-v-496f42a3"),l=l(),D(),l),W={class:"container"},X=Q(()=>m("h1",{class:"text-center"},"註冊",-1)),Z={class:"text-center"},ee={__name:"register",setup(l){const f=E(!1),V=()=>{const o=window.scrollY,a=80;f.value=o>a};F(()=>{window.addEventListener("scroll",V)}),I(()=>{window.removeEventListener("scroll",V)});const{api:x}=z(),S=L(),w=U(),C=H({account:d().required("使用者帳號必填").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符").test("isAlphanumeric","使用者帳號格式錯誤",o=>_.isAlphanumeric(o)),email:d().required("使用者信箱必填").test("isEmail","使用者信箱格式錯誤",o=>_.isEmail(o)),password:d().required("使用者密碼必填").min(4,"使用者密碼長度不符").max(20,"使用者密碼長度不符"),passwordConfirm:d().oneOf([O("password")],"密碼不一致")}),{handleSubmit:M,isSubmitting:b}=Y({validationSchema:C}),c=u("account"),p=u("email"),v=u("password"),g=u("passwordConfirm"),k=M(async o=>{var a,r;try{await x.post("/user",{account:o.account,email:o.email,password:o.password}),w({text:"註冊成功",snackbarProps:{color:"green"}}),S.push("/login")}catch(n){console.log(n),w({text:((r=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:r.message)||"發生錯誤",snackbarProps:{color:"red"}})}});return(o,a)=>(A(),B($,null,[m("div",{id:"navbar",class:P({"hidden-navbar":f.value})},null,2),s(K,{fluid:"",class:"text-black bg-img"},{default:t(()=>[m("div",W,[s(G,{class:"bg box"},{default:t(()=>[s(h,{cols:"12"},{default:t(()=>[X]),_:1}),s(J),s(h,{cols:"12"},{default:t(()=>[s(j,{onSubmit:q(e(k),["prevent"]),disabled:e(b)},{default:t(()=>[s(i,{label:"帳號",minlength:"4",maxlength:"20",counter:"",modelValue:e(c).value.value,"onUpdate:modelValue":a[0]||(a[0]=r=>e(c).value.value=r),"error-messages":e(c).errorMessage.value},null,8,["modelValue","error-messages"]),s(i,{label:"信箱",type:"email",modelValue:e(p).value.value,"onUpdate:modelValue":a[1]||(a[1]=r=>e(p).value.value=r),"error-messages":e(p).errorMessage.value},null,8,["modelValue","error-messages"]),s(i,{label:"密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(v).value.value,"onUpdate:modelValue":a[2]||(a[2]=r=>e(v).value.value=r),"error-messages":e(v).errorMessage.value},null,8,["modelValue","error-messages"]),s(i,{label:"確認密碼",type:"password",minlength:"4",maxlength:"20",counter:"",modelValue:e(g).value.value,"onUpdate:modelValue":a[3]||(a[3]=r=>e(g).value.value=r),"error-messages":e(g).errorMessage.value},null,8,["modelValue","error-messages"]),m("div",Z,[s(N,{type:"submit",color:"green",loading:e(b)},{default:t(()=>[R("註冊")]),_:1},8,["loading"])])]),_:1},8,["onSubmit","disabled"])]),_:1})]),_:1})])]),_:1})],64))}},de=y(ee,[["__scopeId","data-v-496f42a3"]]);export{de as default};
