import{_ as k,u as I,aY as B,a6 as w,E as d,r as A,o as m,a8 as S,w as e,b as a,V as y,az as L,ac as p,ae as V,aA as R,aB as T,aC as M,R as N,ay as U,I as z,a7 as F,a as b,aa as f,ad as Y,F as x,e as $,aE as D,O as G,af as H,ag as O}from"./index-i6M1RC1a.js";import{V as j,a as _}from"./VCol-CR4bclpd.js";import{V as C}from"./VRow-ChUQapms.js";import{V as q}from"./VPagination--XfQNbFQ.js";const J={__name:"ProductCard",props:["_id","category","description","image","name","price","sell"],setup(s){const r=I(),i=B(),g=w(),v=s,o=d(!1),u=async()=>{if(!r.isLogin){i.push("/login");return}o.value=!0;const l=await r.addCart(v._id,1);g({text:l.text,snackbarProps:{color:l.color}}),o.value=!1};return(l,h)=>{const n=A("router-link");return m(),S(U,{class:"card"},{default:e(()=>[a(y,{class:"",src:s.image,cover:"",height:"200"},null,8,["src"]),a(L,{class:"text-center"},{default:e(()=>[a(n,{class:"card-title",to:"/products/"+s._id},{default:e(()=>[p(V(s.name),1)]),_:1},8,["to"])]),_:1}),a(R,null,{default:e(()=>[p("$"+V(s.price),1)]),_:1}),a(T,null,{default:e(()=>[p(V(s.description),1)]),_:1}),a(M,{class:"btn"},{default:e(()=>[a(N,{"prepend-icon":"mdi-cart",onClick:u,loading:o.value},{default:e(()=>[p("加入購物車")]),_:1},8,["loading"])]),_:1})]),_:1})}}},K=k(J,[["__scopeId","data-v-f5beb50b"]]),E=s=>(H("data-v-bac43b70"),s=s(),O(),s),Q=E(()=>f("h1",{class:"text-center title1 text-black text-Chinese"},"線上購物",-1)),W={class:"image-container"},X=E(()=>f("h1",{class:"text-overlay"},"寵物紀鑰匙圈",-1)),P=20,Z={__name:"ProductPage",setup(s){const r=d(!1),i=()=>{const n=window.scrollY,c=80;r.value=n>c};z(()=>{window.addEventListener("scroll",i)}),F(()=>{window.removeEventListener("scroll",i)});const{api:g}=D(),v=w(),o=d(1),u=d(1),l=d([]),h=async()=>{var n,c;try{const{data:t}=await g.get("/product",{params:{itemsPerPage:P,page:o.value}});u.value=Math.ceil(t.result.total/P),l.value.splice(0,l.value.length,...t.result.data)}catch(t){console.log(t),v({text:((c=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:c.message)||"發生錯誤",snackbarProps:{color:"red"}})}};return h(),(n,c)=>(m(),b(x,null,[f("div",{id:"navbar",class:Y({"hidden-navbar":r.value})},null,2),a(j,{fluid:"",class:"container"},{default:e(()=>[a(C,null,{default:e(()=>[a(_,{cols:"12"},{default:e(()=>[Q]),_:1})]),_:1}),a(C,null,{default:e(()=>[a(_,{cols:"12",md:"5",class:"no-padding image-container"},{default:e(()=>[f("div",W,[a(y,{class:"text",src:"https://picsum.photos/300/200/?random=10"}),X])]),_:1}),(m(!0),b(x,null,$(l.value,t=>(m(),S(_,{cols:"12",md:"2",lg:"2",class:"pl-5 pr-3",key:t._id},{default:e(()=>[a(K,G({ref_for:!0},t),null,16)]),_:2},1024))),128)),a(_,{cols:"12",class:"text-grey"},{default:e(()=>[a(q,{modelValue:o.value,"onUpdate:modelValue":[c[0]||(c[0]=t=>o.value=t),h],length:u.value,rounded:"circle"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})],64))}},oa=k(Z,[["__scopeId","data-v-bac43b70"]]);export{oa as default};
