import{p as I,m as F,f as Y,g as L,h as A,b as l,i as te,j as ae,k as J,l as K,n as Q,t as H,q as le,s as oe,v as Z,x as ne,y as se,z as C,c as f,A as re,V as ie,B as M,C as R,D as ue,E as z,G as ce,H as p,I as de,J as ve,K as me,L as ge,M as fe,N as be,O as U,P as he,Q as ye,R as D,S as Ve,T as Se,U as xe,W as ke,X as Be,Y as Te,Z as _e,_ as we,$ as Ce,a0 as Ne,a1 as Pe,a2 as Ie,a3 as He,u as Le,a4 as Ae,r as Ee,o as g,a as N,d as B,a5 as T,w as x,F as P,e as q,a6 as w,a7 as $,a8 as Re,a9 as pe}from"./index-D_aQDjk7.js";import{u as De,a as O,V as Ue}from"./VList-DiqzJXek.js";import{V as Me,a as $e}from"./VNavigationDrawer-DqBJTV4J.js";import{V as Fe}from"./VContainer-B-bJ3VNI.js";import"./VDivider-BrcqnFsU.js";const Ye=I({text:String,...F(),...Y()},"VToolbarTitle"),ze=L()({name:"VToolbarTitle",props:Ye(),setup(e,i){let{slots:t}=i;return A(()=>{const v=!!(t.default||t.text||e.text);return l(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var s;return[v&&l("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(s=t.default)==null?void 0:s.call(t)])]}})}),{}}}),We=[null,"prominent","default","comfortable","compact"],ee=I({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>We.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...te(),...F(),...ae(),...J(),...Y({tag:"header"}),...K()},"VToolbar"),j=L()({name:"VToolbar",props:ee(),setup(e,i){var h;let{slots:t}=i;const{backgroundColorClasses:v,backgroundColorStyles:s}=Q(H(e,"color")),{borderClasses:o}=le(e),{elevationClasses:u}=oe(e),{roundedClasses:c}=Z(e),{themeClasses:d}=ne(e),{rtlClasses:y}=se(),a=C(!!(e.extended||(h=t.extension)!=null&&h.call(t))),m=f(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),S=f(()=>a.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return re({VBtn:{variant:"text"}}),A(()=>{var _;const r=!!(e.title||t.title),b=!!(t.image||e.image),V=(_=t.extension)==null?void 0:_.call(t);return a.value=!!(e.extended||V),l(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},v.value,o.value,u.value,c.value,d.value,y.value,e.class],style:[s.value,e.style]},{default:()=>[b&&l("div",{key:"image",class:"v-toolbar__image"},[t.image?l(M,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):l(ie,{key:"image-img",cover:!0,src:e.image},null)]),l(M,{defaults:{VTabs:{height:R(m.value)}}},{default:()=>{var E,n,k;return[l("div",{class:"v-toolbar__content",style:{height:R(m.value)}},[t.prepend&&l("div",{class:"v-toolbar__prepend"},[(E=t.prepend)==null?void 0:E.call(t)]),r&&l(ze,{key:"title",text:e.title},{text:t.title}),(n=t.default)==null?void 0:n.call(t),t.append&&l("div",{class:"v-toolbar__append"},[(k=t.append)==null?void 0:k.call(t)])])]}}),l(M,{defaults:{VTabs:{height:R(S.value)}}},{default:()=>[l(ue,null,{default:()=>[a.value&&l("div",{class:"v-toolbar__extension",style:{height:R(S.value)}},[V])]})]})]})}),{contentHeight:m,extensionHeight:S}}}),Xe=I({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function qe(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=i;let v=0,s=0;const o=z(null),u=C(0),c=C(0),d=C(0),y=C(!1),a=C(!1),m=f(()=>Number(e.scrollThreshold)),S=f(()=>ce((m.value-u.value)/m.value||0)),h=()=>{const r=o.value;if(!r||t&&!t.value)return;v=u.value,u.value="window"in r?r.pageYOffset:r.scrollTop;const b=r instanceof Window?document.documentElement.scrollHeight:r.scrollHeight;if(s!==b){s=b;return}a.value=u.value<v,d.value=Math.abs(u.value-m.value)};return p(a,()=>{c.value=c.value||u.value}),p(y,()=>{c.value=0}),de(()=>{p(()=>e.scrollTarget,r=>{var V;const b=r?document.querySelector(r):window;b&&b!==o.value&&((V=o.value)==null||V.removeEventListener("scroll",h),o.value=b,o.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),ve(()=>{var r;(r=o.value)==null||r.removeEventListener("scroll",h)}),t&&p(t,h,{immediate:!0}),{scrollThreshold:m,currentScroll:u,currentThreshold:d,isScrollActive:y,scrollRatio:S,isScrollingUp:a,savedScroll:c}}const Oe=I({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...ee(),...me(),...Xe(),height:{type:[Number,String],default:64}},"VAppBar"),je=L()({name:"VAppBar",props:Oe(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:t}=i;const v=z(),s=ge(e,"modelValue"),o=f(()=>{var k;const n=new Set(((k=e.scrollBehavior)==null?void 0:k.split(" "))??[]);return{hide:n.has("hide"),fullyHide:n.has("fully-hide"),inverted:n.has("inverted"),collapse:n.has("collapse"),elevate:n.has("elevate"),fadeImage:n.has("fade-image")}}),u=f(()=>{const n=o.value;return n.hide||n.fullyHide||n.inverted||n.collapse||n.elevate||n.fadeImage||!s.value}),{currentScroll:c,scrollThreshold:d,isScrollingUp:y,scrollRatio:a}=qe(e,{canScroll:u}),m=f(()=>o.value.hide||o.value.fullyHide),S=f(()=>e.collapse||o.value.collapse&&(o.value.inverted?a.value>0:a.value===0)),h=f(()=>e.flat||o.value.fullyHide&&!s.value||o.value.elevate&&(o.value.inverted?c.value>0:c.value===0)),r=f(()=>o.value.fadeImage?o.value.inverted?1-a.value:a.value:void 0),b=f(()=>{var W,X;const n=Number(((W=v.value)==null?void 0:W.contentHeight)??e.height),k=Number(((X=v.value)==null?void 0:X.extensionHeight)??0);return m.value?c.value<d.value||o.value.fullyHide?n+k:n:n+k});fe(f(()=>!!e.scrollBehavior),()=>{he(()=>{m.value?o.value.inverted?s.value=c.value>d.value:s.value=y.value||c.value<d.value:s.value=!0})});const{ssrBootStyles:V}=De(),{layoutItemStyles:_,layoutIsReady:E}=be({id:e.name,order:f(()=>parseInt(e.order,10)),position:H(e,"location"),layoutSize:b,elementSize:C(void 0),active:s,absolute:H(e,"absolute")});return A(()=>{const n=j.filterProps(e);return l(j,U({ref:v,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{..._.value,"--v-toolbar-image-opacity":r.value,height:void 0,...V.value},e.style]},n,{collapse:S.value,flat:h.value}),t)}),E}}),Ge=I({...ye({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Je=L()({name:"VAppBarNavIcon",props:Ge(),setup(e,i){let{slots:t}=i;return A(()=>l(D,U(e,{class:["v-app-bar-nav-icon"]}),t)),{}}}),Ke=I({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Ve,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...F(),...Se({location:"top end"}),...J(),...Y(),...K(),...xe({transition:"scale-rotate-transition"})},"VBadge"),G=L()({name:"VBadge",inheritAttrs:!1,props:Ke(),setup(e,i){const{backgroundColorClasses:t,backgroundColorStyles:v}=Q(H(e,"color")),{roundedClasses:s}=Z(e),{t:o}=ke(),{textColorClasses:u,textColorStyles:c}=Be(H(e,"textColor")),{themeClasses:d}=Te(),{locationStyles:y}=_e(e,!0,a=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(a)?+(e.offsetY??0):["left","right"].includes(a)?+(e.offsetX??0):0));return A(()=>{const a=Number(e.content),m=!e.max||isNaN(a)?e.content:a<=+e.max?a:`${e.max}+`,[S,h]=we(i.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return l(e.tag,U({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},h,{style:e.style}),{default:()=>{var r,b;return[l("div",{class:"v-badge__wrapper"},[(b=(r=i.slots).default)==null?void 0:b.call(r),l(Ce,{transition:e.transition},{default:()=>{var V,_;return[Ne(l("span",U({class:["v-badge__badge",d.value,t.value,s.value,u.value],style:[v.value,c.value,e.inline?{}:y.value],"aria-atomic":"true","aria-label":o(e.label,a),"aria-live":"polite",role:"status"},S),[e.dot?void 0:i.slots.badge?(_=(V=i.slots).badge)==null?void 0:_.call(V):e.icon?l(Ie,{icon:e.icon},null):m]),[[Pe,e.modelValue]])]}})])]}})}),{}}}),lt={__name:"default",setup(e){const{mobile:i}=He(),t=Le(),v=Ae(),s=z(!1),o=f(()=>[{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!t.isLogin},{to:"/login",text:"登入",icon:"mdi-account-arrow-left",show:!t.isLogin},{to:"/cart",text:"購物車",icon:"mdi-cart",show:t.isLogin},{to:"/orders",text:"訂單",icon:"mdi-list-box",show:t.isLogin},{to:"/admin",text:"管理",icon:"mdi-cog",show:t.isLogin&&t.isAdmin}]),u=async()=>{await t.logout(),v({text:"登出成功",snackbarProps:{color:"green"}})};return(c,d)=>{const y=Ee("router-view");return g(),N(P,null,[B(i)?(g(),T(Me,{key:0,modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=a=>s.value=a)},{default:x(()=>[l(Ue,{nav:""},{default:x(()=>[(g(!0),N(P,null,q(o.value,a=>(g(),N(P,{key:a.to},[a.show?(g(),T(O,{key:0,"prepend-icon":a.icon,to:a.to,title:a.text},{append:x(()=>[a.to==="/cart"&&B(t).cart>0?(g(),T(G,{key:0,color:"error",content:B(t).cart,inline:""},null,8,["content"])):w("",!0)]),_:2},1032,["prepend-icon","to","title"])):w("",!0)],64))),128)),B(t).isLogin?(g(),T(O,{key:0,"prepend-icon":"mdi-account-arrow-right",title:"登出",onClick:u})):w("",!0)]),_:1})]),_:1},8,["modelValue"])):w("",!0),l(je,null,{default:x(()=>[l(Fe,{class:"d-flex align-center"},{default:x(()=>[l(D,{to:"/",active:!1},{default:x(()=>[$("購物網")]),_:1}),l(Re),B(i)?(g(),T(Je,{key:0,onClick:d[1]||(d[1]=a=>s.value=!0)})):(g(),N(P,{key:1},[(g(!0),N(P,null,q(o.value,a=>(g(),N(P,{key:a.to},[a.show?(g(),T(D,{key:0,"prepend-icon":a.icon,to:a.to},{default:x(()=>[$(pe(a.text)+" ",1),a.to==="/cart"&&B(t).cart>0?(g(),T(G,{key:0,color:"red",content:B(t).cart,floating:""},null,8,["content"])):w("",!0)]),_:2},1032,["prepend-icon","to"])):w("",!0)],64))),128)),B(t).isLogin?(g(),T(D,{key:0,"prepend-icon":"mdi-account-arrow-right",onClick:u},{default:x(()=>[$("登出")]),_:1})):w("",!0)],64))]),_:1})]),_:1}),l($e,null,{default:x(()=>[l(y)]),_:1})],64)}}};export{lt as default};
